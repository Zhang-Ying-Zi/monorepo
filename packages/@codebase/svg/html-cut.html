<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, viewport-fit=cover, shrink-to-fit=no"
    />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="description" content="" />
    <!-- <link rel="icon" href="favicon.ico" /> -->
    <title>html-cut</title>
    <style>
    </style>
  </head>

  <body>
    <svg xmlns="http://www.w3.org/2000/svg" id="snap">
      <foreignObject width="120" height="60">
        <!-- 要截图的html内容放这里-->
        <p style="font-size:20px;margin:0;">欢迎您</p>
      </foreignObject>
    </svg>

    <canvas id="result"></canvas>

    <script>
      window.onload = function() {
        var width = 120;
        var height = 60;

        var DOMURL = self.URL || self.webkitURL || self;
        var data = new XMLSerializer().serializeToString(document.getElementById("snap"));

        var svg = new Blob([data], { type: "image/svg+xml" });
        var url = DOMURL.createObjectURL(svg);

        const link = document.createElement('a');
        link.href = url;
        link.download = "file-cut";
        link.click();

        var canvas = document.getElementById("result");
        canvas.width = width;
        canvas.height = height;
        var ctx = canvas.getContext("2d");

        var img = new Image(width, height);
        img.onload = function() {
          ctx.drawImage(img, 0, 0);
          DOMURL.revokeObjectURL(url);
        }
        img.src = url;
      }


    </script>
  </body>
</html>
