<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=0" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <meta name="format-detection" content="telephone=no" /> 
        <meta name="format-detection" content="email=no" />
        <meta name="keywords" content="" />
        <meta name="description" content="" />
        <title>Base</title>
        <style type="text/css">
            canvas { border: 1px solid black; }
        </style>
    </head>
    <body>

        <canvas id="canvas" width="500" height="500">You browser do not support canvas</canvas>
    
        <script type="text/javascript" src="./js/utils.js"></script>
        <script type="text/javascript">
        
            var sun = new Image();
            var moon = new Image();
            var earth = new Image();
            sun.src = './assets/Canvas_sun.png';
            moon.src = './assets/Canvas_moon.png';
            earth.src = './assets/Canvas_earth.png';
     
            window.onload=function(){
                var canvas=document.getElementById("canvas");
                var ctx=canvas.getContext("2d");
                (function drawFrame(){
                    window.requestAnimationFrame(drawFrame);
                    ctx.clearRect(0,0,canvas.width,canvas.height);
                    
                    ctx.globalCompositeOperation = 'destination-over';
                    ctx.fillStyle = 'rgba(0,0,0,0.4)';
                    ctx.strokeStyle = 'rgba(0,153,255,0.4)';
                    ctx.save();
                    ctx.translate(150,150);
                    // Earth
                    var time = new Date();
                    ctx.rotate( ((2*Math.PI)/60)*time.getSeconds() + ((2*Math.PI)/60000)*time.getMilliseconds() );
                    ctx.translate(105,0);
                    ctx.fillRect(0,-12,40,24); // Shadow
                    ctx.drawImage(earth,-12,-12);
                    // Moon
                    ctx.save();
                    ctx.rotate( ((2*Math.PI)/6)*time.getSeconds() + ((2*Math.PI)/6000)*time.getMilliseconds() );
                    ctx.translate(0,28.5);
                    ctx.drawImage(moon,-3.5,-3.5);
                    ctx.restore();

                    ctx.restore();
                    
                    ctx.beginPath();
                    ctx.arc(150,150,105,0,Math.PI*2,false); // Earth orbit
                    ctx.stroke();
                    
                    ctx.drawImage(sun,0,0,300,300);

                }());
                
            };
        </script>
    </body>
</html>